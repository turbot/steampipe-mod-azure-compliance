## Description

Allow trusted Azure services to access the storage account even when network rules are in effect, enabling necessary Azure service integrations.

Some Azure services that interact with storage accounts operate from networks that can't be granted access through network rules. To help this type of service work as intended, allow the set of trusted Azure services to bypass the network rules. These services will then use strong authentication to access the storage account. Trusted Microsoft services include Azure Backup, Azure Site Recovery, Azure DevTest Labs, Azure Event Grid, Azure Event Hubs, Azure Networking, Azure Monitor, and Azure SQL Data Warehouse.

## Remediation

### From Azure Portal

1. Go to `Storage Accounts`.
2. For each storage account, under `Security + networking`, click `Networking`.
3. Under `Exceptions`, check the box for `Allow Azure services on the trusted services list to access this storage account`.
4. Click `Save`.

### From Azure CLI

```bash
az storage account update --name <storage-account> --resource-group <resource-group> --bypass AzureServices
```

### From PowerShell

```bash
Update-AzStorageAccountNetworkRuleSet -ResourceGroupName <resource-group> -Name <storage-account> -Bypass AzureServices
```

### Default Value

By default, trusted Azure services are not allowed to bypass network rules.

