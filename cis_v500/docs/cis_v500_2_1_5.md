## Description

Unity Catalog should be configured to provide unified governance, data discovery, and fine-grained access control for data in Azure Databricks.

## Rationale

Unity Catalog is Databricks' unified governance solution that provides:
- Centralized governance for data and AI assets
- Fine-grained access control at the table, view, and column level
- Data lineage tracking and auditing
- Consistent governance across multiple workspaces
- Integration with existing metastores and catalogs
- Attribute-based access control (ABAC)
- Dynamic views for row and column-level security

Implementing Unity Catalog ensures that data access is properly governed, audited, and compliant with organizational policies and regulatory requirements.

## Audit

**From Azure Portal:**

1. Go to `Azure Databricks`
2. Click on the workspace
3. Under `Settings`, check if Unity Catalog is enabled
4. Note the associated metastore

**From Databricks Workspace:**

1. Launch the Databricks workspace
2. Go to `Data` in the left navigation
3. Verify that Unity Catalog catalogs are visible
4. Check if the workspace is assigned to a Unity Catalog metastore
5. Go to `Settings` > `Admin Console` > `Unity Catalog`
6. Verify metastore configuration and assignments

**From Databricks CLI:**

```bash
# Check Unity Catalog metastore
databricks unity-catalog metastores list

# Check if workspace is assigned to a metastore
databricks unity-catalog workspace-assignments list
```

## Remediation

**Enable Unity Catalog:**

1. **Create Unity Catalog Metastore:**
   - In Account Console, go to `Data` > `Metastores`
   - Click `Create metastore`
   - Provide a name and select a region
   - Specify a storage location (Azure Data Lake Storage Gen2)
   - Click `Create`

2. **Assign Metastore to Workspace:**
   - In Account Console, select the metastore
   - Go to `Workspaces`
   - Click `Assign to workspace`
   - Select the workspace(s)
   - Click `Assign`

3. **Configure Access Controls:**
   - In Databricks workspace, go to `Data`
   - Configure grants on catalogs, schemas, and tables
   - Set up data access policies

4. **Migrate Existing Data:**
   - Create catalogs in Unity Catalog
   - Migrate tables from legacy metastore
   - Update references in notebooks and jobs

**From Databricks CLI:**

```bash
# Create metastore
databricks unity-catalog metastores create \
  --name <metastore-name> \
  --storage-root <storage-path> \
  --region <region>

# Assign workspace to metastore
databricks unity-catalog workspace-assignments create \
  --workspace-id <workspace-id> \
  --metastore-id <metastore-id>
```

## References

- [Unity Catalog](https://docs.microsoft.com/en-us/azure/databricks/data-governance/unity-catalog/)
- [Enable Unity Catalog](https://docs.microsoft.com/en-us/azure/databricks/data-governance/unity-catalog/get-started)
- [Unity Catalog best practices](https://docs.microsoft.com/en-us/azure/databricks/data-governance/unity-catalog/best-practices)

