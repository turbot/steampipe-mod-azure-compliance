## Description

Containers in Azure storage accounts may contain sensitive or personal data, such as ePHI or financial information. Data that is erroneously modified or deleted by an application or a user can lead to data loss or unavailability.

It is recommended that soft delete for containers be enabled on Azure storage accounts with blob storage to allow for the preservation and recovery of data when containers are deleted.

## Remediation

### From Azure Portal

1. Go to `Storage accounts`.
2. For each Storage Account with blob storage, under `Data management`, go to `Data protection`.
3. Check the box next to `Enable soft delete for containers`.
4. Set the retention period to a sufficient length for your organization.
5. Click `Save`.

### Remediate from Azure CLI

Run the following command to update container retention:

```bash
az storage account blob-service-properties update --resource-group <resourcegroup> --account-name <storage-account> --enable-container-delete-retention true --container-delete-retention-days <retention-days>
```

### Default Value

Soft delete for containers is enabled by default on storage accounts created via the Azure Portal, and disabled by default on storage accounts created via Azure CLI or PowerShell.

